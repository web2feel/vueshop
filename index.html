<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Hind+Siliguri:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="./scss/style.css">
    <title>Vue Shop</title>
</head>
<body>
    <div id="store">
        <div id="banner"> Use the coupon code 'BINGO' for 50% discount on your purchase </div>
        <header id="header">
            <div class="container"> <div class="row"> <div class="col-md-12"> 
                <h1>VueShop</h1>
            </div></div></div>
        </header>
        <main id="main">
            <div class="container"><div class="row"><div class="col-lg-8">
                <div class="content">
                    <div class="products">
                        <div class="row">                                
                            <div v-for="(product,index) in products" class="col-md-4 col-sm-6" v-bind:id="product.id">
                                <div class="product-block">
                                    <div class="product-img-block">
                                        <button v-on:click="addToCart(product)" class="add-to-cart"> Add to Cart </button>
                                        <img v-bind:src="'./img/'+product.image" alt=""/>
                                    </div>
                                    <div class="product-info-block d-flex align-items-center justify-content-between">
                                        <h2> {{product.name}} </h2>
                                        <div class="price-tag"> {{currency}}{{product.price}} </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div id="sidebar">
                    <div class="widget">
                        <h2>Cart</h2>
                        <div v-if="cartitems.length > 0" class="mini-cart">                            
                            <div class="cart-list">
                                <div v-for="cartitem in cartitems" class="cart-item">
                                    <div class="mincart-img">
                                        <img v-bind:src="'./img/'+cartitem.image" alt="prod001">
                                    </div>
                                    <div class="mincart-info ">
                                        <div class="mincart-product-name" >
                                            <h3>{{cartitem.name}}</h3>
                                            <p>{{cartitem.price}} {{cartitem.totalPrice}}</p> 
                                        </div>
                                        <div class="mincart-price d-flex justify-content-end align-items-center"> 
                                                <div class="mincart-quantity"> 
                                                        
                                                        <input type="number" oninput="this.value=(parseInt(this.value)||0)" value="0" class="quant" min="0" v-model.number="cartitem.quantity" @change="updateTotal(cartitem)"> 
                                                    </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="cart-summary">
                                <div> <h4>Subtotal</h4> <span> {{subTotal}} </span></div>
                                <div> <h4>Tax ({{taxPercent}}%)</h4> <span> {{taxTotal}}</span></div>
                                <div> <h4>Coupon Code</h4> <input @change="applyCoupon" v-model="coupon" type="text" placeholder="Enter Coupon code"></div>
                                <div> <h4 class="total-amount">Total</h4> 
                                    <span v-if="discountedTotal > 0">{{discountedTotal}}</span>
                                    <span v-else> {{totalFinal}} </span>
                                </div>
                            </div>
                            <div class="cart-actions">
                                <button v-on:click="clearCart" class="back-shopping"> Clear Cart </button>
                                <button class="checkout"> Checkout </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div></div></div>
        </main>
        <footer id="footer">
            <div class="container"><div class="row"><div class="col-md-12"> 
                <p> Vueshop - A vue powered ecommerce  page | Check it out on <a href="https://github.com/web2feel/vueshop">Github</a> </p> 
            </div></div></div>
        </footer>
    </div>    
</body>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="./js/script.js"></script>
</html>